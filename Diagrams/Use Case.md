## Диаграмма вариантов использования

![Use Case](https://github.com/StasRimashewskii/BookNest/blob/main/Diagrams/images/Use_case.png)

## Глоссарий

|Термин	                |Определение|
|:----------------------|:---------------------------------------------|
|Гость                  | Неаутентифицированный пользователь веб-приложения. Для продолжения работы необходимо аутентифицироваться.|
|Пользователь           | Аутентифицированный зарегистрированный пользователь приложения. Может управлять коллекцией книг, просматривать книги, добавлять новые книги. |  
|Администратор | Привилегированный пользователь, отвечающий за техническую поддержку и конфигурацию системы.|
|Книга       | Элемент коллекции с названием, автором, описанием, жанром и другими метаданными.|
|Коллекция книг       |	Персональная база данных книг пользователя, которую он может просматривать и редактировать.|

## Поток событий

## Содержание

- [1. Актеры](#1-актеры)
- [2. Варианты использования](#2-варианты-использования)
- [2.1 Зарегистрироваться](#21-зарегистрироваться)
- [2.2 Войти в учетную запись](#22-войти-в-учетную-запись)
- [2.3 Посмотреть коллекцию книг](#23-посмотреть-коллекцию-книг)
- [2.4 Посмотреть информацию о книге](#24-посмотреть-информацию-о-книге)
- [2.5 Добавить новую книгу](#25-добавить-новую-книгу)
- [2.6 Управлять коллекцией книг](#26-управлять-коллекцией-книг)
- [2.7 Выйти из учетной записи](#27-выйти-из-учетной-записи)
- [2.8 Управлять интеграциями и конфигурацией системы](#28-управлять-интеграциями-и-конфигурацией-системы)

## 1. Актеры
|Актер	       |Описание|
|:-------------|:-------------------------------------------------|
|Гость	       |Неаутентифицированный пользователь веб-приложения. Для продолжения работы необходимо аутентифицироваться.|
|Пользователь  |	Аутентифицированный пользователь. Может управлять коллекцией книг, просматривать книги, добавлять новые книги, просматривать информацию о книгах.|
|Администратор | Привилегированный пользователь. Наследует возможности Пользователя. Отвечает за поддержку системы и управление конфигурацией.|

## 2. Варианты использования

## 2.1 Зарегистрироваться

**Описание**. Вариант использования "Зарегистрироваться" позволяет Гостю создать новую учётную запись в системе.

**Предусловия.** Гость находится на странице аутентификации и выбрал опцию "Регистрация".

**Основной поток.**

1. Система отображает форму регистрации, запрашивая email и пароль.
2. Гость вводит требуемые данные и подтверждает отправку формы.
3. Система проверяет валидность email и соответствие пароля политике безопасности.
4. Система создаёт новую учётную запись, хэширует пароль и автоматически аутентифицирует пользователя.
5. Система перенаправляет Пользователя на главную страницу.
6. Вариант использования завершается.

**Альтернативный поток А1: Данные невалидны.**
- Если введённые данные не проходят проверку (email не уникален, пароль слишком простой), система отображает соответствующее сообщение об ошибке.
- Возврат к п.2 основного потока.

**Альтернативный поток А2: Отмена регистрации.**
- Гость отменяет процесс регистрации до подтверждения.
- Система возвращает Гостя на страницу аутентификации.
- Вариант использования завершается досрочно.

**Постусловия.** Гость получает статус "Пользователь" и аутентифицирован в системе.

## 2.2 Войти в учетную запись

**Описание.** Вариант использования "Войти в учетную запись" позволяет зарегистрированному пользователю аутентифицироваться в системе.

**Предусловия.** Пользователь находится на странице аутентификации.

**Основной поток.**
1. Пользователь вводит свой email и пароль в форму входа.
2. Пользователь подтверждает отправку формы.
3. Система проверяет соответствие введённого пароля хэшу в базе данных.
4. При успешной проверке система создаёт сессию (JWT-токен) и перенаправляет Пользователя на главную страницу.
5. Вариант использования завершается.

**Альтернативный поток А1: Неверные учётные данные.**
- Если email или пароль неверны, система отображает сообщение об ошибке аутентификации.
- Возврат к п.1 основного потока.

**Постусловия.** Пользователь аутентифицирован в системе.

## 2.3 Посмотреть коллекцию книг

**Описание.** Вариант использования позволяет пользователю просмотреть свою коллекцию книг.

**Предусловия.** Пользователь аутентифицирован.

**Основной поток.**
1. Пользователь переходит на страницу "Моя коллекция" или главную страницу.
2. Система отображает список книг в коллекции пользователя с базовой информацией (название, автор, обложка).
3. Пользователь может прокручивать список и просматривать книги.
4. Вариант использования завершается.

**Альтернативный поток А1: Коллекция пуста.**
- Система отображает сообщение о пустой коллекции и предлагает добавить первую книгу.

## 2.4 Посмотреть информацию о книге

**Описание.** Вариант использования позволяет пользователю просмотреть подробную информацию о конкретной книге.

**Предусловия.** Пользователь аутентифицирован и находится в коллекции книг.

**Основной поток.**
1. Пользователь выбирает книгу из коллекции.
2. Система отображает детальную информацию о книге: название, автор, жанр, описание, год издания, рейтинг и т.д.
3. Вариант использования завершается.

**Альтернативный поток А1: Книга не найдена.**
- Если книга была удалена или недоступна, система отображает сообщение об ошибке.

## 2.5 Добавить новую книгу

**Описание.** Вариант использования позволяет пользователю добавить новую книгу в свою коллекцию.

**Предусловия.** Пользователь аутентифицирован.

**Основной поток.**
1. Пользователь нажимает кнопку "Добавить книгу".
2. Система отображает форму для ввода информации о книге.
3. Пользователь заполняет необходимые поля (название, автор, жанр и т.д.) и подтверждает добавление.
4. Система проверяет данные и добавляет книгу в коллекцию пользователя.
5. Система отображает подтверждение успешного добавления.
6. Вариант использования завершается.

**Альтернативный поток А1: Неполные или невалидные данные.**
- Система отображает сообщение об ошибке и подсвечивает проблемные поля.
- Возврат к п.3 основного потока.

## 2.6 Управлять коллекцией книг

**Описание.** Вариант использования позволяет пользователю управлять своей коллекцией книг.

**Предусловия.** Пользователь аутентифицирован.

**Основной поток.**
1. Пользователь переходит в раздел управления коллекцией.
2. Система отображает инструменты для управления: редактирование, удаление, сортировка, фильтрация книг.
3. Пользователь выполняет необходимые операции управления.
4. Система применяет изменения и обновляет отображение коллекции.
5. Вариант использования завершается.

**Альтернативный поток А1: Операция не может быть выполнена.**
- При возникновении ошибки система уведомляет пользователя и откатывает изменения.

## 2.7 Выйти из учетной записи

**Описание.** Вариант использования позволяет пользователю завершить сеанс работы в системе.

**Предусловия.** Пользователь аутентифицирован.

**Основной поток.**
1. Пользователь нажимает кнопку "Выход" в интерфейсе приложения.
2. Система инвалидирует JWT-токен пользователя.
3. Система перенаправляет пользователя на страницу аутентификации.
4. Вариант использования завершается.

## 2.8 Управлять интеграциями и конфигурацией системы

**Описание.** Позволяет Администратору управлять подключениями к внешним API и конфигурацией системы.

**Предусловия.** Администратор аутентифицирован.

**Основной поток.**
1. Администратор открывает панель управления.
2. Система отображает список активных интеграций и их состояние.
3. Администратор может обновить ключи API, включить/отключить интеграции, проверить журнал ошибок.
4. Система сохраняет изменения и применяет их без остановки сервиса.
5. Вариант использования завершается.

**Альтернативный поток А1: Ошибка конфигурации.**
- При ошибке применения настроек система откатывает изменения и уведомляет администратора.
